"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[453],{3462:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>i});const o=JSON.parse('{"id":"Documenta\xe7\xf5es de Desenvolvimento/deploy","title":"Deploy para Google Cloud Run","description":"\ud83c\udf10 Servi\xe7o em Produ\xe7\xe3o","source":"@site/docs/Documenta\xe7\xf5es de Desenvolvimento/deploy.md","sourceDirName":"Documenta\xe7\xf5es de Desenvolvimento","slug":"/Documenta\xe7\xf5es de Desenvolvimento/deploy","permalink":"/chatbot-contabilizei/docs/Documenta\xe7\xf5es de Desenvolvimento/deploy","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Arquitetura T\xe9cnica do Sistema RAG: Agente de Intelig\xeancia Contabilizei","permalink":"/chatbot-contabilizei/docs/Documenta\xe7\xf5es de Desenvolvimento/arquitetura_geral_detalhada"},"next":{"title":"\ud83d\udd12 Seguran\xe7a e Testes","permalink":"/chatbot-contabilizei/docs/Documenta\xe7\xf5es de Desenvolvimento/testes-e-seguranca"}}');var t=a(4848),r=a(8453);const s={},l="Deploy para Google Cloud Run",c={},i=[{value:"\ud83c\udf10 Servi\xe7o em Produ\xe7\xe3o",id:"-servi\xe7o-em-produ\xe7\xe3o",level:2},{value:"\ud83d\ude80 Deploy",id:"-deploy",level:2},{value:"\ud83d\udd04 Atualizar",id:"-atualizar",level:2},{value:"\ud83e\uddea Teste Local",id:"-teste-local",level:2},{value:"\u2699\ufe0f Configura\xe7\xf5es",id:"\ufe0f-configura\xe7\xf5es",level:2},{value:"\ud83d\uddd1\ufe0f Derrubar Servi\xe7o",id:"\ufe0f-derrubar-servi\xe7o",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"deploy-para-google-cloud-run",children:"Deploy para Google Cloud Run"})}),"\n",(0,t.jsx)(n.h2,{id:"-servi\xe7o-em-produ\xe7\xe3o",children:"\ud83c\udf10 Servi\xe7o em Produ\xe7\xe3o"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"URL"}),": ",(0,t.jsx)(n.a,{href:"https://agente-contabil-55837972640.us-central1.run.app",children:"https://agente-contabil-55837972640.us-central1.run.app"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl https://agente-contabil-55837972640.us-central1.run.app/health\ncurl -X POST https://agente-contabil-55837972640.us-central1.run.app/chat \\\n  -H "Content-Type: application/json" -d \'{"message": "O que \xe9 ISS?"}\'\n'})}),"\n",(0,t.jsx)(n.h2,{id:"-deploy",children:"\ud83d\ude80 Deploy"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Pr\xe9-requisitos:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"brew install --cask google-cloud-sdk\ngcloud auth login\ngcloud config set project ctbz-ia-assessoria-poc\ngcloud auth configure-docker us-central1-docker.pkg.dev\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Deploy completo:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker build --platform linux/amd64 -t agente-contabil:amd64 .\n\n# Tag e Push\ndocker tag agente-contabil:amd64 us-central1-docker.pkg.dev/ctbz-ia-assessoria-poc/cloud-run-source-deploy/agente-contabil:amd64\ndocker push us-central1-docker.pkg.dev/ctbz-ia-assessoria-poc/cloud-run-source-deploy/agente-contabil:amd64\n\n# Deploy\ngcloud run deploy agente-contabil \\\n  --image us-central1-docker.pkg.dev/ctbz-ia-assessoria-poc/cloud-run-source-deploy/agente-contabil:amd64 \\\n  --region us-central1 \\\n  --allow-unauthenticated \\\n  --set-env-vars OPENAI_API_KEY=sua_chave\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-atualizar",children:"\ud83d\udd04 Atualizar"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker build --platform linux/amd64 -t agente-contabil:amd64 .\ndocker tag agente-contabil:amd64 us-central1-docker.pkg.dev/ctbz-ia-assessoria-poc/cloud-run-source-deploy/agente-contabil:latest\ndocker push us-central1-docker.pkg.dev/ctbz-ia-assessoria-poc/cloud-run-source-deploy/agente-contabil:latest\ngcloud run deploy agente-contabil --image us-central1-docker.pkg.dev/ctbz-ia-assessoria-poc/cloud-run-source-deploy/agente-contabil:latest --region us-central1\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-teste-local",children:"\ud83e\uddea Teste Local"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker build --platform linux/amd64 -t agente-contabil:test .\ndocker run -d -p 8080:8080 --env-file src/.env --name agente-test agente-contabil:test\ncurl http://localhost:8080/health\ndocker stop agente-test && docker rm agente-test\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-configura\xe7\xf5es",children:"\u2699\ufe0f Configura\xe7\xf5es"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Env vars\ngcloud run services update agente-contabil --region us-central1 --set-env-vars OPENAI_API_KEY=nova_chave\n\n# Recursos\ngcloud run deploy agente-contabil --region us-central1 --memory 2Gi --cpu 2 --timeout 300\n\n# Logs\ngcloud run services logs tail agente-contabil --region us-central1\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-derrubar-servi\xe7o",children:"\ud83d\uddd1\ufe0f Derrubar Servi\xe7o"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Deletar servi\xe7o Cloud Run\ngcloud run services delete agente-contabil --region us-central1\n\n# Deletar imagem do Artifact Registry (opcional)\ngcloud artifacts docker images delete \\\n  us-central1-docker.pkg.dev/ctbz-ia-assessoria-poc/cloud-run-source-deploy/agente-contabil:amd64\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>l});var o=a(6540);const t={},r=o.createContext(t);function s(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);